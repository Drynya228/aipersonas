# AgentDesk

AgentDesk ‚Äî –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–µ macOS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (SwiftUI), –ø–æ–º–æ–≥–∞—é—â–µ–µ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Ä–∞–±–æ—á—É—é —Å–∏–ª—É –Ω–∞ –±–∞–∑–µ –ò–ò-–ø–µ—Ä—Å–æ–Ω. –≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Ä–∫–∞—Å MVP —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –∑–∞–≥–æ—Ç–æ–≤–∫–∞–º–∏ —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- macOS 13+
- Xcode 15+
- Swift 5.9+
- Homebrew (–¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `AgentDesk.xcodeproj` (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–ø–∫–∏ `AgentDesk` –≤ Xcode).
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `make bootstrap`, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ SQLite –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏.
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ö–µ–º—É `AgentDeskApp` –∏ —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (‚åò+B).
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (‚åò+R).

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- API-–∫–ª—é—á–∏ OpenAI –∏ –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ Keychain (`security add-generic-password -a agentdesk -s openai -w <KEY>`).
- `.env` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ—Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π, –≤–∫–ª—é—á–µ–Ω–∏–µ dry-run –∏ —Ç.–¥.).
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤: `security find-generic-password -a agentdesk -s openai`.

### –î–µ–≤-—Ä–µ–∂–∏–º
- `make dev` ‚Äî —Å–±–æ—Ä–∫–∞ Debug –∏ –∑–∞–ø—É—Å–∫ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–≤ (RAG, Payments, Voice).
- –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Xcode Console –∏ –≤ —Ñ–∞–π–ª–∞—Ö `~/Library/Logs/AgentDesk/*.log`.
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å `Sourcing Dry-Run` —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –Ω–∞ —ç–∫—Ä–∞–Ω–µ Settings.

## üì± –û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
- **Dashboard** ‚Äî KPI (Jobs/Day, RPM, Accept Rate, Rev Cost –∏ –¥—Ä.) + –ª–µ–Ω—Ç–∞ —Ä–µ—à–µ–Ω–∏–π RevenueWatch.
- **Personas** ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CRUD, –ø—Ä–µ–¥–ø—Ä–æ—Å–ª—É—à–∫–∞ TTS, –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–≤—ã–∫–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
- **Tasks** ‚Äî –ö–∞–Ω–±–∞–Ω (Intake ‚Üí In-progress ‚Üí Validate ‚Üí Deliver) —Å –∫–Ω–æ–ø–∫–æ–π –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ª–∏–º–∏—Ç–æ–≤.
- **Chat/Calls** ‚Äî –ø–æ—Ç–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –∑–∞–¥–∞—á–µ, —Å–∏–º—É–ª—è—Ü–∏—è –∑–≤–æ–Ω–∫–∞ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏/—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞.
- **Artifacts** ‚Äî –≤–µ—Ä—Å–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç ZIP, –∑–∞–ø—Ä–æ—Å—ã –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É RAG —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏.
- **Settings** ‚Äî Keychain-—Å—Å—ã–ª–∫–∏, –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å sourcing dry-run/live, –∏–º–ø–æ—Ä—Ç RAG, compliance-—Å–∫–∞–Ω—ã, –ø–ª–∞—Ç–µ–∂–∏.

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
AgentDesk/
  AgentDeskApp/         # UI SwiftUI
  AgentCore/            # –ú–æ–¥–µ–ª–∏, —Å–µ—Å—Å–∏–∏, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
  ToolHub/              # –†–µ–µ—Å—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–π, JSON-—Å—Ö–µ–º—ã, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
  Voice/                # Realtime/TTS –∑–∞–≥–ª—É—à–∫–∏
  RAG/                  # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏ –≤—ã–¥–∞—á–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  Storage/              # –•—Ä–∞–Ω–∏–ª–∏—â–µ (GRDB-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, InMemory stub)
  RevenueWatch/         # –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ø–æ—Ä–æ–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
  Payments/             # –ò–Ω–≤–æ–π—Å—ã, –ø–æ–ª–ª–∏–Ω–≥, –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏
  Compliance/           # –°–∞–Ω–∏—Ç–∞–π–∑–µ—Ä, freeze, –ø–æ–ª–∏—Ç–∏–∫–∏
  Docs/                 # –ü–µ—Ä—Å–æ–Ω—ã, —á–µ–∫-–ª–∏—Å—Ç—ã, –æ—Ñ—Ñ–µ—Ä—ã, SOP
  CI/                   # –°–∫—Ä–∏–ø—Ç—ã CI (lint/test/build)
  Tests/                # XCTest
  Makefile
```

## üì• RAG
- –ò–º–ø–æ—Ä—Ç PDF/MD/HTML ‚Äî –≤–∫–ª–∞–¥–∫–∞ RAG –Ω–∞ —ç–∫—Ä–∞–Ω–µ Artifacts.
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (FAISS/SQLite). –í MVP –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ (`RAGService`).
- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–º–µ–Ω—É—é—Ç—Å—è –ø–æ –∫–ª–∏–µ–Ω—Ç—É –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–µ. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Ö –≤ Settings.

## üß† –ü–µ—Ä—Å–æ–Ω—ã
- –§–æ—Ä–º–∞—Ç JSON (—Å–º. `Docs/personas`).
- –ü–æ–ª—è: `name`, `role`, `tone`, `voicePreset`, `voiceRate`, `skills`, `tools_allowed`, `rag_collections`, `constraints`.
- CRUD —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `PersonasView`. –ü—Ä–µ–¥–ø—Ä–æ—Å–ª—É—à–∫–∞ TTS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `VoiceService.previewSpeech`.

## üîç Sourcing & Bid Engine
- –°–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º—ã `dry-run` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ `live`. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ Settings ‚Üí Sourcing.
- –õ–∏–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Tasks (–∫–æ–ª–æ–Ω–∫–∞ Intake). –û—Ñ—Ñ–µ—Ä—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –±–∞–∑–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ `Docs/proposals`.

## üí∞ Payments
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö API-–∫–ª—é—á–µ–π –≤ Settings.
- `billing.create_invoice` –∏ `billing.poll` –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ ToolHub.
- –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ ‚Äî **—Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é** –≤–ª–∞–¥–µ–ª—å—Ü–µ–º (—Å–º. SOP).

## üìä RevenueWatch
- –ú–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é (–º–µ–Ω—é ‚åòR) –∏ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –ø–æ –æ–∫–Ω—É (`1d/7d`).
- –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —Ä–µ—à–µ–Ω–∏—è —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ (`routing.rebalance`, ¬´tighten-intake¬ª –∏ –¥—Ä.).
- –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ Dashboard, –∞ —Ç–∞–∫–∂–µ —á–µ—Ä–µ–∑ `RevenueMetricsService.recentDecisions()`.

## üõ°Ô∏è –ö–æ–º–ø–ª–∞–µ–Ω—Å
- `ComplianceService.scan` ‚Äî –±–∞–∑–æ–≤—ã–π —Å–∞–Ω–∏—Ç–∞–π–∑–µ—Ä. –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∏—Å–µ–º/–æ—Ñ—Ñ–µ—Ä–æ–≤ –ø—Ä–æ–≥–æ–Ω—è—é—Ç—Å—è —Ç–µ–∫—Å—Ç—ã.
- Kill-switch `admin.freeze` –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Settings.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `make test` ‚Äî –∑–∞–ø—É—Å–∫ XCTest (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç Sessions, ToolHub, RAG, Compliance, Payments, Voice, RevenueWatch).
- `make lint` ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å `swift-format` (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç, –µ—Å–ª–∏ —É—Ç–∏–ª–∏—Ç–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞).

## üì¶ –ü–æ—Å—Ç–∞–≤–∫–∞
- –í —Ä–∞–∑–¥–µ–ª–µ Artifacts –Ω–∞–∂–º–∏—Ç–µ **Export ZIP** ‚Äî —Ñ–∞–π–ª –ø–æ—è–≤–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ email-–¥—Ä–∞—Ñ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `email.draft` (—á–µ—Ä–µ–∑ ToolHub –∏–ª–∏ Sessions).

## üß≠ –ü–µ—Ä–≤—ã–π E2E —Å—Ü–µ–Ω–∞—Ä–∏–π
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω—É Manager –∏ Worker –≤ Personas.
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ PDF ‚Üí –ø—Ä–∏–≤—è–∂–∏—Ç–µ –∫ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞.
3. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É ¬´EN‚ÜíRU –ª–µ–Ω–¥–∏–Ω–≥¬ª ‚Üí Worker –≤—ã–ø—É—Å–∫–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫.
4. Validator –ø—Ä–∏–º–µ–Ω—è–µ—Ç —á–µ–∫-–ª–∏—Å—Ç `translate.yml` ‚Üí –≤–µ—Ä–¥–∏–∫—Ç Accept.
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Realtime-–∑–≤–æ–Ω–æ–∫ (30-60 —Å–µ–∫), –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∑–∞–ø–∏—Å—å –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç.
6. `routing.rebalance` –∏ `market.search` –ø–æ—è–≤—è—Ç—Å—è –≤ –ª–æ–≥–∞—Ö RevenueWatch –ø—Ä–∏ –Ω–∏–∑–∫–∏—Ö KPI.
7. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ Invoice –∏ –æ—Ç–º–µ—Ç—å—Ç–µ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ webhook-—Å–∏–º—É–ª—è—Ç–æ—Ä.
8. –ù–∞–∂–º–∏—Ç–µ Deliver ‚Üí –ø–æ–ª—É—á–∏—Ç–µ ZIP —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏.

## üîç –õ–æ–≥–∏
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `~/Library/Logs/AgentDesk/app.log`.
- RevenueWatch: `~/Library/Logs/AgentDesk/revenue.log`.
- Voice: `~/Library/Logs/AgentDesk/voice.log`.

## üì° CI
- GitHub Actions/–ª—é–±–∞—è CI —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ `CI/` (`lint.sh`, `test.sh`, `build.sh`).

## ‚ùì FAQ
- **–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–ª—é—á–∏?** –í Keychain macOS.
- **–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å live-–ø–æ–¥–∞—á—É –æ—Ñ—Ñ–µ—Ä–æ–≤?** Settings ‚Üí Sourcing ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å `dry-run` ‚Üí `live` (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è).
- **–ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–µ–Ω—å–≥–∏ –±–æ—Ç–∞–º?** –ù–µ—Ç. –¢–æ–ª—å–∫–æ –∏–Ω–≤–æ–π—Å—ã/–∫–≤–∏—Ç–∞–Ω—Ü–∏–∏. –í—ã–≤–æ–¥ ‚Äî –≤—Ä—É—á–Ω—É—é –≤–ª–∞–¥–µ–ª—å—Ü–µ–º.
- **–ö–∞–∫ –ø–æ—á–∏—Å—Ç–∏—Ç—å PII?** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Compliance ‚Üí Sanitize. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî `Docs/sop/pii-leak.md`.

## üìê Scale
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–µ–∫: Kubernetes runner + Helm chart + Vault + ArgoCD.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ namespaces –∏ –∫–≤–æ—Ç –æ–ø–∏—Å–∞–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ `Scale` README (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ v1.1/v1.2).

## üßæ SOP
- –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –æ–ø–∏—Å–∞–Ω—ã –≤ `Docs/sop/*.md` (–∫–ª—é—á–∏, PII, freeze, –ø–ª–∞—Ç–µ–∂–∏, –ª–∏–º–∏—Ç—ã API).

